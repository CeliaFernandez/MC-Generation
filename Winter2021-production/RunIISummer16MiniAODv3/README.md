# Installation

We first initialize the chosen CMSSW release with slc6 architecture:
```
export SCRAM_ARCH=slc6_amd64_gcc630

source /cvmfs/cms.cern.ch/cmsset_default.sh
if [ -r CMSSW_9_4_9/src ] ; then
  echo release CMSSW_9_4_9 already exists
else
  scram p CMSSW CMSSW_9_4_9
fi
cd CMSSW_9_4_9/src
eval `scram runtime -sh`

scram b
cd ../..
```

The command to generate the MiniAOD cfg file is run as follows:
```
cmsDriver.py  --python_filename EXO-RunIISummer16MiniAODv3_cfg.py --eventcontent MINIAODSIM --customise Configuration/DataProcessing/Utils.addMonitoring --datatier MINIAODSIM --fileout file:EXO-RunIISummer16MiniAODv3ext.root --conditions 94X_mcRun2_asymptotic_v3 --step PAT --filein file:EXO-RunIISummer16DR80Premix-2.root --era Run2_2016,run2_miniAOD_80XLegacy --runUnscheduled --no_exec --mc -n 10 || exit $? ;
```

However, this config file is incomplete since the routines described there keep the Displaced Global Muon collection from being saved. In order to add such collection to the new miniAOD samples the following lines must be added by hand in the <strong>output definitio</strong> section:
```
# Lines added to include displaced muon info:
process.MINIAODSIMEventContent.outputCommands.extend(cms.untracked.vstring(
    'keep *_displacedGlobalMuons_*_RECO',
    'keep *_displacedStandAloneMuons_*_RECO'
))
```

The final config file is saved in this repository as ```EXO-RunIISummer16MiniAODv3ext_cfg.py```.

## Crab launching

The files to launch a crab3 production for this step are generated by running e.g. mH = 125 GeV, mX = 30 GeV and ctau = 10 mm:
```
python create-crab_RunIISummer16MiniAODv3ext.py -s 1 -d step2_dataset_name -H 125 -X 30 -T 10
```



