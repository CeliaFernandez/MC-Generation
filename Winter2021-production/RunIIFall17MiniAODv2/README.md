# Installation

We first initialize the chosen CMSSW release with slc6 architecture:
```
export SCRAM_ARCH=slc6_amd64_gcc630

source /cvmfs/cms.cern.ch/cmsset_default.sh
if [ -r CMSSW_9_4_7/src ] ; then
  echo release CMSSW_9_4_7 already exists
else
  scram p CMSSW CMSSW_9_4_7
fi
cd CMSSW_9_4_7/src
eval `scram runtime -sh`

scram b
```

The command to generate the MiniAOD cfg file is run as follows:
```
cmsDriver.py  --python_filename EXO-RunIIFall17MiniAODv2_cfg.py --eventcontent MINIAODSIM --customise Configuration/DataProcessing/Utils.addMonitoring --datatier MINIAODSIM --fileout file:EXO-RunIIFall17MiniAODv2.root --conditions 94X_mc2017_realistic_v14 --step PAT --scenario pp --filein file:EXO-RunIIFall17DRPremix-2.root --era Run2_2017,run2_miniAOD_94XFall17 --runUnscheduled --no_exec --mc -n 10;
```

However, this config file is incomplete since the routines described there keep the Displaced Global Muon collection from being saved. In order to add such collection to the new miniAOD samples the following lines must be added by hand in the <strong>output definitio</strong> section:
```
# Lines added to include displaced muon info:
process.MINIAODSIMEventContent.outputCommands.extend(cms.untracked.vstring(
    'keep *_displacedGlobalMuons_*_RECO',
    'keep *_displacedStandAloneMuons_*_RECO'
))
```

The final config file is saved in this repository as ```EXO-RunIISummer16MiniAODv3ext_cfg.py```.

## Crab launching

The files to launch a crab3 production for this step are generated by running e.g. mH = 125 GeV, mX = 30 GeV and ctau = 10 mm:
```
python create-crab_RunIIFall17MiniAODv2ext.py -s 1 -d step2_dataset_name -H 125 -X 30 -T 10
```



